<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HI MY BGM - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">HI MY BGM Settings</h1>
      <p class="subtitle">Configure your focus companion</p>
    </header>

    <main class="main">
      <!-- Behavior Settings -->
      <section class="section">
        <h2 class="section-title">Behavior Thresholds</h2>
        <p class="section-desc">Adjust how the bubble detects your focus state</p>

        <div class="form-group">
          <label class="label">
            <span class="label-text">Idle timeout (seconds)</span>
            <span class="label-value" id="idle-value">10</span>
          </label>
          <input type="range" id="idle-timeout" min="5" max="60" step="5" value="10" class="slider">
          <p class="help-text">Time without input before marking as idle</p>
        </div>

        <div class="form-group">
          <label class="label">
            <span class="label-text">Distraction threshold</span>
            <span class="label-value" id="distraction-value">5</span>
          </label>
          <input type="range" id="distraction-threshold" min="2" max="15" step="1" value="5" class="slider">
          <p class="help-text">Tab switches in 60s to mark as distracted</p>
        </div>
      </section>

      <!-- Context & Signals -->
      <section class="section">
        <h2 class="section-title">Context &amp; Signals</h2>
        <p class="section-desc">Opt-in access that powers smarter prompts and lyrics</p>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="allow-page-text" checked>
            <span>Allow page text for context &amp; lyrics (opt-in)</span>
          </label>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="allow-typed-text" checked>
            <span>Allow reading typed text for cues (opt-in)</span>
          </label>
        </div>
      </section>

      <!-- UI Settings -->
      <section class="section">
        <h2 class="section-title">Appearance</h2>

        <div class="form-group">
          <label class="label">
            <span class="label-text">Bubble position</span>
          </label>
          <select id="bubble-position" class="select">
            <option value="bottom-right">Bottom Right</option>
            <option value="bottom-left">Bottom Left</option>
            <option value="top-right">Top Right</option>
            <option value="top-left">Top Left</option>
          </select>
        </div>

        <div class="form-group">
          <label class="label">
            <span class="label-text">Color theme</span>
          </label>
          <select id="color-theme" class="select">
            <option value="cool">Cool (Blue/Cyan)</option>
            <option value="warm">Warm (Orange/Red)</option>
            <option value="neutral">Neutral (Gray)</option>
          </select>
        </div>
      </section>

      <!-- Music Backend -->
      <section class="section">
        <h2 class="section-title">Music Backend</h2>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-youtube" checked>
            <span>YouTube (default, no auth required)</span>
          </label>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-spotify">
            <span>Spotify (requires premium)</span>
          </label>
          <div class="nested-inputs" id="spotify-config">
            <input type="text" id="spotify-client-id" placeholder="Spotify Client ID" class="input">
            <input type="text" id="spotify-redirect-uri" placeholder="Redirect URI" class="input">
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-musichero">
            <span><strong>MusicHero</strong> - AI overlay generation</span>
          </label>
          <div class="nested-inputs" id="musichero-config">
            <input type="text" id="musichero-api-url" placeholder="MusicHero API URL" class="input">
            <input type="password" id="musichero-api-key" placeholder="MusicHero API Key" class="input">
            <div class="inline-inputs">
              <label class="checkbox-inline">
                <input type="checkbox" id="musichero-instrumental" checked>
                <span>Instrumental only</span>
              </label>
              <label class="checkbox-inline">
                <input type="checkbox" id="allow-lyric-hook" checked>
                <span>Allow lyric hook injection</span>
              </label>
            </div>
            <input type="number" id="musichero-duration" min="10" max="120" step="5" placeholder="Default duration (seconds)" class="input">
          </div>
        </div>
      </section>

      <!-- AI Integrations -->
      <section class="section">
        <h2 class="section-title">AI Integrations (Optional)</h2>
        <p class="section-desc">All integrations are opt-in and fail-graceful</p>

        <!-- Captain AI -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-captain">
            <span>
              <strong>Captain AI</strong> - Agent orchestration
              <a href="https://docs.runcaptain.com/" target="_blank" class="link">docs</a>
            </span>
          </label>
          <div class="nested-inputs" id="captain-config">
            <input type="text" id="captain-api-url" placeholder="API URL (default: https://api.runcaptain.com)" class="input">
            <input type="password" id="captain-api-key" placeholder="API Key" class="input">
          </div>
        </div>

        <!-- Metorial AI -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-metorial">
            <span>
              <strong>Metorial AI</strong> - User memory & personalization
              <a href="https://metorial.com" target="_blank" class="link">info</a>
            </span>
          </label>
          <div class="nested-inputs" id="metorial-config">
            <input type="text" id="metorial-api-url" placeholder="API URL (default: https://api.metorial.com)" class="input">
            <input type="password" id="metorial-api-key" placeholder="API Key" class="input">
          </div>
        </div>

        <!-- Coval AI -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-coval">
            <span>
              <strong>Coval AI</strong> - Voice TTS
              <a href="https://www.coval.dev/" target="_blank" class="link">docs</a>
            </span>
          </label>
          <div class="nested-inputs" id="coval-config">
            <input type="text" id="coval-api-url" placeholder="API URL (default: https://api.coval.dev)" class="input">
            <input type="password" id="coval-api-key" placeholder="API Key" class="input">
            <input type="text" id="coval-voice-id" placeholder="Voice ID (optional)" class="input">
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-voice-coach" checked>
            <span><strong>Voice Coach</strong> - Spoken focus nudges</span>
          </label>
        </div>

        <!-- OpenAI -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-openai">
            <span><strong>OpenAI</strong> - LLM for reasoning</span>
          </label>
          <div class="nested-inputs" id="openai-config">
            <input type="password" id="openai-api-key" placeholder="OpenAI API Key" class="input">
          </div>
        </div>

        <!-- Anthropic -->
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="use-anthropic">
            <span><strong>Anthropic</strong> - Claude for reasoning</span>
          </label>
          <div class="nested-inputs" id="anthropic-config">
            <input type="password" id="anthropic-api-key" placeholder="Anthropic API Key" class="input">
          </div>
        </div>
      </section>

      <!-- Privacy -->
      <section class="section">
        <h2 class="section-title">Privacy</h2>
        <p class="privacy-notice">
          Page text, typed cues, and lyric hooks are only used when enabled above and never stored.
          HI MY BGM stores interaction timestamps and counters locally.
          All cloud integrations are opt-in and configurable.
        </p>
      </section>

      <!-- Actions -->
      <div class="actions">
        <button class="btn btn-primary" id="save-btn">Save Settings</button>
        <button class="btn btn-secondary" id="reset-btn">Reset to Defaults</button>
      </div>

      <div class="status-message" id="status-message"></div>
    </main>
  </div>

  <script src="options.js"></script>
</body>
</html>
